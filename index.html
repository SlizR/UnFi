<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnFi - Universal Fast Bootloader</title>
    <link rel="icon" type="image/png" href="UnFi.png">
  
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="UnFi ‚Äî Universal Fast Bootloader.">
<meta name="keywords" content="UnFi, bootloader, universal, fast, firmware, BIOS, UEFI, system">
<meta name="author" content="Sliz¬Æ">
<meta name="robots" content="index, follow">

<meta property="og:title" content="UnFi - Universal Fast Bootloader">
<meta property="og:description" content="A lightning-fast and versatile downloader. UnFi is a new era of speed.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://unfi.pp.ua/">
<meta property="og:image" content="https://unfi.pp.ua/UnFi.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="UnFi - Universal Fast Bootloader">
<meta name="twitter:description" content="Speed ‚Äã‚Äãup your start with UnFi, the all-in-one downloader for everything.">
<meta name="twitter:image" content="https://unfi.pp.ua/UnFi.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="https://unfi.pp.ua/UnFi.png">
<link rel="apple-touch-startup-image" href="https://unfi.pp.ua/UnFi.png">

<meta name="msapplication-TileColor" content="#1a1a1a">
<meta name="msapplication-TileImage" content="https://unfi.pp.ua/UnFi.png">

<link rel="icon" type="image/png" sizes="32x32" href="https://unfi.pp.ua/UnFi.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://unfi.pp.ua/UnFi.png">

<meta name="application-name" content="UnFi Bootloader">
<meta name="generator" content="UnFi Engine">
<meta name="rating" content="General">
<meta name="revisit-after" content="7 days">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow-x: hidden;
        }

        header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 50px;
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .logo-container:hover {
            transform: scale(1.05);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            object-fit: contain;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 120px 20px 60px;
            text-align: center;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .rotating-text-container {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
        }

        .rotating-text {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(90deg, #fff, #ffd700, #ff6b6b, #4ecdc4, #fff);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite, slideUp 0.6s ease;
        }

        @keyframes shimmer {
            to {
                background-position: 200% center;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cta-button {
            padding: 18px 45px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            animation: fadeInUp 1.2s ease;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .features {
            padding: 80px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .features-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 60px;
            font-weight: 700;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .feature-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .feature-description {
            opacity: 0.9;
            line-height: 1.6;
        }

        .platforms {
            padding: 80px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .platforms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .platform-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .platform-card:hover {
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .platform-name {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .get-started {
            padding: 80px 20px;
            background: rgba(0, 0, 0, 0.3);
        }

        .code-section {
            max-width: 800px;
            margin: 40px auto;
            background: #1e1e1e;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .code-header {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }

        .code-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-block {
            background: #2d2d2d;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            color: #4ec9b0;
            overflow-x: auto;
            position: relative;
        }

        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 15px;
            background: #667eea;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            background: #764ba2;
        }

        footer {
            padding: 40px 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
        }

        footer p {
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            header {
                padding: 15px 20px;
            }

            .hero-title {
                font-size: 2.2rem;
            }

            .rotating-text {
                font-size: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .features-grid,
            .platforms-grid {
                grid-template-columns: 1fr;
            }
        }

        #unfiLogo {
  background: linear-gradient(90deg, #00f0ff, #ff00ff, #00ff9d, #00f0ff);
  background-size: 300% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: unfiGradient 5s linear infinite;
  cursor: default;
  user-select: none;
  transition: transform 0.2s ease;
}

@keyframes unfiGradient {
  0% { background-position: 0% center; }
  100% { background-position: 300% center; }
}

.shimmer-small {
  display: inline-block;
  background: linear-gradient(
    90deg,
    #ffffff 0%,
    #dcdcdc 50%,
    #ffffff 100%
  );
  background-size: 200%;
  -webkit-background-clip: text;
  color: transparent;
  animation: textShimmer 3s ease-in-out infinite;
}

@keyframes textShimmer {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 0%; }
  100% { background-position: 0% 0%; }
}
    </style>
</head>
<body>
    <header>
        <a href="https://unfi.pp.ua" class="logo-container" style="text-decoration: none; color: inherit;">
            <img src="UnFi.png" alt="UnFi" class="logo-icon">
            <div class="logo-text">UnFi</div>
        </a>
    </header>

    <section class="hero">
  <h1 class="hero-title">
    Your Perfect <span id="unfiLogo">UnFi</span> Bootloader for
  </h1>
  <div class="rotating-text-container">
    <div class="rotating-text" id="rotatingText">Arduino</div>
  </div>
  <p class="hero-subtitle">Fast, Secure, Universal - Boot Your Systems in <span class="shimmer-small">Milliseconds</span></p>
  <button class="cta-button" onclick="document.getElementById('get-started').scrollIntoView({behavior: 'smooth'})">
    Get Started Now
  </button>
</section>

    <section class="features">
        <div class="features-container">
            <h2 class="section-title">Why Choose UnFi?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3 class="feature-title">Lightning Fast</h3>
                    <p class="feature-description">Boot your systems in milliseconds with our optimized bootloader architecture. UnFi reduces boot time by up to <span class="shimmer-small">70%</span> compared to traditional bootloaders.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3 class="feature-title">Secure by <span class="shimmer-small">Sliz¬Æ</span></h3>
                    <p class="feature-description">Built-in encryption and secure boot verification ensure your firmware is protected against unauthorized modifications and attacks.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üåê</div>
                    <h3 class="feature-title">Universal Support</h3>
                    <p class="feature-description">Works seamlessly across <span class="shimmer-small">Arduino</span>, <span class="shimmer-small">ESP32</span>, <span class="shimmer-small">ESP8266</span> platforms. One bootloader for all your projects.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîß</div>
                    <h3 class="feature-title">Easy Integration</h3>
                    <p class="feature-description">Simple API and comprehensive documentation make integration a breeze. Get up and running in <span class="shimmer-small">minutes</span>, not hours.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì¶</div>
                    <h3 class="feature-title">Minimal Footprint</h3>
                    <p class="feature-description">Optimized code size means more space for your application. UnFi takes less than <span class="shimmer-small">4KB of flash memory</span>.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üß†</div>
                    <h3 class="feature-title">Self-Diagnostics</h3>
                    <p class="feature-description">
                    Every UnFi boot begins with an <span class="shimmer-small">intelligent system scan</span>. 
                    Detect issues, verify hardware integrity, and ensure <span class="shimmer-small">stable operation</span> ‚Äî automatically.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section class="platforms">
        <h2 class="section-title">Supported Platforms</h2>
        <div class="platforms-grid">
            <div class="platform-card">
                <div class="platform-name">üî∑ Arduino</div>
            </div>
            <div class="platform-card">
                <div class="platform-name">üì° ESP32</div>
            </div>
            <div class="platform-card">
                <div class="platform-name">‚öôÔ∏è ESP8266</div>
            </div>
        </div>
    </section>

    <section class="get-started" id="get-started">
  <div class="features-container">
    <h2 class="section-title">Get Started in Minutes</h2>
    <p style="text-align: center; font-size: 1.1rem; margin-bottom: 20px;">
      Select your device and model to view the bootloader code.
    </p>

    <div id="file-browser" style="margin-top: 20px; border: 1px solid rgba(255,255,255,0.2); border-radius:12px; padding:15px; background: rgba(255,255,255,0.05);"></div>

    <div style="text-align: center; margin-top: 20px;">
      <pre id="file-content" style="background:#1e1e1e; color:#4ec9b0; padding:20px; border-radius:12px; overflow-x:auto; max-height:400px;"></pre>
      <button id="copy-btn" class="cta-button" style="margin-top:10px;">Copy Code</button>
    </div>
  </div>

            <div style="text-align: center; margin-top: 40px;">
                <p style="font-size: 1.1rem; margin-bottom: 20px;">
                    Visit our documentation for detailed guides and examples
                </p>
                <button class="cta-button" onclick="window.open('https://github.com/SlizR/UnFi/wiki/', '_blank')">
                    View Documentation
                </button>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Sliz¬Æ | UnFi‚Ñ¢ | Version 357.15</p>
        <p style="margin-top: 10px;">
            <a href="https://unfi.pp.ua" style="color: #fff; text-decoration: none; opacity: 0.8;">
                Website
            </a>
          <a href="https://github.com/SlizR/UnFi/" style="color: #fff; text-decoration: none; opacity: 0.8;">
                Git-Repo
            </a>
           <a href="https://github.com/SlizR/UnFi/wiki/" style="color: #fff; text-decoration: none; opacity: 0.8;">
                Docs
            </a>
        </p>
    </footer>

    <script>
        const texts = ['Arduino', 'ESP32', 'ESP8266'];
        let currentIndex = 0;
        const rotatingTextElement = document.getElementById('rotatingText');

        function rotateText() {
            currentIndex = (currentIndex + 1) % texts.length;
            rotatingTextElement.style.animation = 'none';
            
            setTimeout(() => {
                rotatingTextElement.textContent = texts[currentIndex];
                rotatingTextElement.style.animation = 'slideUp 0.6s ease';
            }, 50);
        }

        setInterval(rotateText, 2500);

        function copyCode() {
            const code = document.getElementById('codeContent').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const button = document.querySelector('.copy-button');
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>

<script>
const params = new URLSearchParams(window.location.search);
const egg = params.get('est-egg');
if (egg !== null) {

const style = document.createElement('style');
style.textContent = `
  .egg-overlay{
    position:fixed; inset:0; background:radial-gradient(circle at 20% 10%, rgba(0,128,255,0.06), transparent 8%), rgba(2,6,23,0.95);
    color:#bfe7ff; font-family: "SFMono-Regular",ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    z-index:99999; display:flex; justify-content:center; align-items:center; padding:20px;
  }
  .egg-window{ width:900px; max-width:95%; border-radius:12px; box-shadow:0 10px 40px rgba(0,0,0,0.8); overflow:hidden; border:1px solid rgba(255,255,255,0.03) }
  .egg-header{ background:linear-gradient(90deg,#071026,#07263a); padding:10px 16px; display:flex; align-items:center; gap:12px; }
  .led{ width:10px; height:10px; border-radius:50%; background:#2b6; box-shadow:0 0 6px rgba(43,204,102,0.25) }
  .title{ font-weight:700; font-size:14px; color:#dff7ff }
  .egg-body{ display:flex; gap:0; }
  .panel{ padding:18px; width:50%; min-height:360px; box-sizing:border-box; background:linear-gradient(180deg, rgba(10,20,30,0.6), rgba(0,0,0,0.45)); }
  .left{ border-right:1px dashed rgba(255,255,255,0.03); }
  .terminal{ background:#000; color:#7fffd4; padding:12px; height:220px; overflow:auto; border-radius:6px; font-size:13px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.5) }
  .hint{ margin-top:10px; color:#9fd; font-size:13px }
  .controls{ margin-top:12px; display:flex; gap:8px; flex-wrap:wrap }
  .btn{ background:linear-gradient(180deg,#0b3a55,#07283a); padding:8px 12px; border-radius:8px; cursor:pointer; border:1px solid rgba(255,255,255,0.04); color:#cfe; user-select:none }
  .btn:active{ transform:translateY(1px) }
  .small{ font-size:12px; padding:6px 8px }
  .switch-row{ display:flex; gap:8px; margin-top:14px; justify-content:center }
  .switch{ width:36px; height:20px; background:#222; border-radius:4px; display:flex; align-items:center; justify-content:center; cursor:pointer; border:1px solid rgba(255,255,255,0.03) }
  .switch.on{ background:linear-gradient(90deg,#2b6,#0b6); color:#012 }
  .memory-grid{ display:grid; grid-template-columns:repeat(8,1fr); gap:6px; margin-top:12px }
  .mem-cell{ background:#08121a; padding:10px; border-radius:4px; text-align:center; cursor:pointer; user-select:none; border:1px solid rgba(255,255,255,0.02) }
  .mem-cell.correct{ outline:2px solid rgba(43,204,102,0.18) }
  .badge{ margin-top:14px; padding:10px; border-radius:8px; background:linear-gradient(90deg,#071026,#0a2b36); text-align:center; font-weight:700 }
  .close-x{ margin-left:auto; cursor:pointer; color:#89f; font-weight:700 }
  .footer{ padding:8px 12px; font-size:12px; color:#9eb; display:flex; gap:8px; align-items:center; }
  .flash{ animation:flash 1s linear; }
  @keyframes flash{ 0%{filter:brightness(1)}50%{filter:brightness(1.6)}100%{filter:brightness(1)} }
`;
document.head.appendChild(style);

const overlay = document.createElement('div');
overlay.className = 'egg-overlay';
overlay.innerHTML = `
  <div class="egg-window" role="dialog" aria-modal="true">
    <div class="egg-header">
      <div class="led" id="bios-led"></div>
      <div class="title">EST-BOOT / Bootloader playground</div>
      <div style="opacity:0.6;margin-left:8px;font-size:12px">v0.9 ‚Äî secret mode</div>
      <div class="close-x btn small" id="egg-close">‚úï</div>
    </div>
    <div class="egg-body">
      <div class="panel left">
        <div style="display:flex;gap:8px;align-items:center;">
          <div style="font-weight:700">SYSTEM TERMINAL</div>
          <div style="margin-left:auto;font-size:12px;color:#89f" id="term-status">idle</div>
        </div>
        <div class="terminal" id="terminal" aria-live="polite"></div>
        <div class="hint">Complete 3 challenges and collect the Loading Core üõ†Ô∏è</div>
        <div class="controls">
          <div class="btn small" id="start-seq">Start test</div>
          <div class="btn small" id="reset-progress">Reset progress</div>
        </div>
        <div class="badge" id="progress-badge">Progress: 0 / 3</div>
      </div>
      <div class="panel right">
        <div style="font-weight:700">BOOT CHALLENGES</div>
        <div style="margin-top:10px">
          <div style="font-weight:600">1) MEMORY PING</div>
          <div class="memory-grid" id="mem-grid"></div>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:600">2) DIP SWITCHES</div>
          <div class="switch-row" id="switch-row"></div>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:600">3) BOOT SEQUENCE</div>
          <div style="display:flex;gap:8px;align-items:center;margin-top:8px;">
            <div id="boot-seq-display" style="background:#001218;padding:10px;border-radius:6px;min-width:160px"></div>
            <input id="boot-input" placeholder="Write seq" style="background:#06121a;border-radius:6px;padding:8px;border:1px solid rgba(255,255,255,0.03);color:#9ff;font-family:inherit" />
            <div class="btn small" id="check-boot">Check it</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:600">SYSTEM LOG</div>
          <div style="font-size:12px;color:#9fb;margin-top:6px">Secrets: <span style="opacity:0.8">bootloader-theme üåå</span></div>
        </div>
      </div>
    </div>
  </div>
`;
document.body.appendChild(overlay);

const terminal = overlay.querySelector('#terminal');
const led = overlay.querySelector('#bios-led');
const termStatus = overlay.querySelector('#term-status');
const progressBadge = overlay.querySelector('#progress-badge');

function logTerminal(text, tone='info') {
  const p = document.createElement('div');
  p.textContent = text;
  p.className = tone==='err' ? 'flash' : '';
  terminal.appendChild(p);
  terminal.scrollTop = terminal.scrollHeight;
}

overlay.querySelector('#egg-close').addEventListener('click', () => {
  document.body.removeChild(overlay);
});

let ledTimer = setInterval(()=> {
  led.style.opacity = (led.style.opacity==1?0.35:1);
}, 700);

const KEY = 'est_egg_boot_progress_v1';
let progress = JSON.parse(localStorage.getItem(KEY) || '{"mem":false,"switch":false,"boot":false}');
function saveProgress(){ localStorage.setItem(KEY, JSON.stringify(progress)); updateBadge(); }
function resetProgress(){ progress = {mem:false,switch:false,boot:false}; saveProgress(); terminal.innerHTML=''; logTerminal('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω.'); }

function updateBadge(){
  const v = [progress.mem, progress.switch, progress.boot].filter(Boolean).length;
  progressBadge.textContent = `Progress: ${v} / 3`;
  if(v===3) {
    progressBadge.style.background = 'linear-gradient(90deg,#073a0b,#123a1f)';
    progressBadge.textContent = 'CORE UNLOCKED ‚Äî BOOT READY ‚ú®';
    termStatus.textContent = 'core ready';
    logTerminal('>>> CORE UNLOCKED. Bootloader engaged. üéâ');
  }
}
updateBadge();

overlay.querySelector('#reset-progress').addEventListener('click', ()=>{ resetProgress(); });

const memGrid = overlay.querySelector('#mem-grid');
let memAnswer = [];
function setupMemory(){
  memGrid.innerHTML = '';
  memAnswer = [];
  const total = 16, alive = 4;
  const aliveIndices = new Set();
  while(aliveIndices.size<alive){ aliveIndices.add(Math.floor(Math.random()*total)) }
  for(let i=0;i<total;i++){
    const cell = document.createElement('div');
    cell.className = 'mem-cell';
    cell.textContent = Math.random()>0.5? Math.floor(Math.random()*256).toString(16).padStart(2,'0') : Math.floor(Math.random()*256);
    cell.dataset.idx = i;
    memGrid.appendChild(cell);
    if(aliveIndices.has(i)) memAnswer.push(i.toString());
    cell.addEventListener('click', ()=>{
      cell.classList.toggle('selected');
      checkMemory();
    });
  }
}
function checkMemory(){
  const selected = Array.from(memGrid.querySelectorAll('.mem-cell.selected')).map(e=>e.dataset.idx);
  const aliveCount = memAnswer.length;
  if(selected.length === aliveCount && selected.every(s=>memAnswer.includes(s))){
    logTerminal('MEMORY: ping -> OK. All live bytes found.');
    progress.mem = true; saveProgress();
    Array.from(memGrid.children).forEach(c=>c.classList.add('correct'));
    memGrid.querySelectorAll('.mem-cell.selected').forEach(c=>c.style.transform='scale(1.03)');
  } else {
    termStatus.textContent = `memory: ${selected.length}/${aliveCount}`;
  }
}
setupMemory();

const switchRow = overlay.querySelector('#switch-row');
let targetSwitches = [];
function setupSwitches(){
  switchRow.innerHTML = '';
  targetSwitches = [];
  const n = 6;
  for(let i=0;i<n;i++){
    const s = document.createElement('div');
    s.className='switch';
    s.textContent='0';
    s.dataset.state='0';
    s.addEventListener('click', ()=>{
      const st = s.dataset.state === '0' ? '1' : '0';
      s.dataset.state = st;
      s.classList.toggle('on', st==='1');
      s.textContent = st;
      checkSwitches();
    });
    switchRow.appendChild(s);
  }
  for(let i=0;i<n;i++) targetSwitches.push(Math.random()>0.5? '1' : '0');
  logTerminal('DIP: The target pattern has been set. Try to guess the combination.');
}
function checkSwitches(){
  const states = Array.from(switchRow.children).map(s=>s.dataset.state);
  if(states.join('') === targetSwitches.join('')){
    logTerminal('DIP: switches -> MATCH. Integrity ok.');
    progress.switch = true; saveProgress();
    Array.from(switchRow.children).forEach(s=> s.classList.add('correct'));
  } else {
    termStatus.textContent = 'dip: testing...';
  }
}
setupSwitches();

const bootDisplay = overlay.querySelector('#boot-seq-display');
const bootInput = overlay.querySelector('#boot-input');
let bootSeq = '';
function generateBootSeq(){
  const pool = ['A','B','C','1','2','3','!','@'];
  bootSeq = Array.from({length:5}, ()=> pool[Math.floor(Math.random()*pool.length)]).join('');
  bootDisplay.textContent = bootSeq.split('').join(' ');
}
generateBootSeq();

overlay.querySelector('#check-boot').addEventListener('click', ()=>{
  const val = bootInput.value.trim().toUpperCase();
  if(!val) return;
  if(val === bootSeq){
    logTerminal('BOOT SEQ: OK ‚Üí Sequence accepted.');
    progress.boot = true; saveProgress();
    bootDisplay.textContent = 'OK ‚úì';
  } else {
    logTerminal('BOOT SEQ: mismatch ‚Äî trying to synchronize...');
    if(val.length === bootSeq.length){
      termStatus.textContent = 'boot: mismatch';
    } else {
      termStatus.textContent = `boot: length ${val.length}/${bootSeq.length}`;
    }
  }
});

overlay.querySelector('#start-seq').addEventListener('click', async ()=>{
  termStatus.textContent = 'running self-test...';
  logTerminal('>>> INIT BOOT CHECK');
  await delay(400);
  logTerminal('CPU: nominals... OK');
  await delay(300);
  logTerminal('RAM: quick ping');
  await delay(300);
  // flash random memory
  for(let i=0;i<3;i++){
    terminalLastLine(`RAM ping ${i+1}/3`);
    await delay(220);
  }
  logTerminal('Peripherals: DIP, MEMORY, SEQ are available.');
  termStatus.textContent = 'tests ready';
});

function delay(ms){ return new Promise(r=>setTimeout(r, ms)); }
function terminalLastLine(text){
  const p = document.createElement('div');
  p.textContent = text;
  terminal.appendChild(p);
  terminal.scrollTop = terminal.scrollHeight;
}

(function intro(){
  const art = [
    "  ______  _____ _____ _____  ",
    " |  ____|/ ____|_   _|  __ \\ ",
    " | |__  | (___   | | | |__) |",
    " |  __|  \\___ \\  | | |  _  / ",
    " | |____ ____) |_| |_| | \\ \\ ",
    " |______|_____/|_____|_|  \\_\\",
    "",
    "EST-BOOT v0.9 initializing...",
    "Detecting modules: [ok] [ok] [ok]",
    "Type the challenges to unlock the core."
  ];
  art.forEach((l, i)=> setTimeout(()=> logTerminal(l), i*120));
})();

saveProgress();
updateBadge();

overlay.addEventListener('dblclick', (e)=> {
  const target = e.target;
  if(target.classList.contains('terminal') || target.id==='egg-close') return;
  setupMemory(); setupSwitches(); generateBootSeq();
  logTerminal('DEV: quick-reset of mini-games (double click).');
});

document.addEventListener('keydown', function escClose(e){
  if(e.key === 'Escape'){ if(document.body.contains(overlay)) document.body.removeChild(overlay); document.removeEventListener('keydown', escClose); }
});

function cheerIfComplete(){
  const done = [progress.mem, progress.switch, progress.boot].every(Boolean);
  if(done){
    const header = overlay.querySelector('.egg-header');
    header.animate([{transform:'scale(1)'},{transform:'scale(1.02)'},{transform:'scale(1)'}], {duration:900, iterations:3});
    logTerminal('*** ALL SYSTEMS GREEN ‚Äî Boot sequence complete. Enjoy your secret mode! ***');
  }
}
saveProgress();
cheerIfComplete();

window.addEventListener('storage', (e)=> {
  if(e.key === KEY) {
    progress = JSON.parse(e.newValue || '{"mem":false,"switch":false,"boot":false}');
    updateBadge();
  }
});
}
</script>
    <script>
let clickCount = 0;
let clickTimer = null;
const unfiLogo = document.getElementById('unfiLogo');

unfiLogo.addEventListener('click', () => {
  clickCount++;
  clearTimeout(clickTimer);
  clickTimer = setTimeout(() => clickCount = 0, 1200);
  if (clickCount >= 5) {
    window.location.href = '?est-egg=1';
    clickCount = 0;
  }
});

const texts = ['Arduino', 'ESP32', 'ESP8266'];
let currentIndex = 0;
const rotatingTextElement = document.getElementById('rotatingText');

function rotateText() {
  rotatingTextElement.style.animation = 'none';
  void rotatingTextElement.offsetWidth;
  
  currentIndex = (currentIndex + 1) % texts.length;
  rotatingTextElement.textContent = texts[currentIndex];
  
  rotatingTextElement.style.animation = 'shimmer 3s linear infinite, slideUp 0.6s ease';
}

setInterval(rotateText, 2500);
</script>
<script>
const unfiStructure = {
  "Arduino": {
    "Uno": {
      "boot.ino": "/Arduino/Uno/boot.ino"
    },
    "Nano": {
      "boot.ino": "/Arduino/Nano/boot.ino"
    },
    "Mega": {
      "boot.ino": "/Arduino/Mega/boot.ino"
    },
    "Leonardo": {
      "boot.ino": "/Arduino/Leonardo/boot.ino"
    },
    "Due": {
      "boot.ino": "/Arduino/Due/boot.ino"
    },
    "Micro": {
      "boot.ino": "/Arduino/Micro/boot.ino"
    },
    "Pro_Mini": {
      "boot.ino": "/Arduino/Pro_Mini/boot.ino"
    },
    "MKR_WiFi_1010": {
      "boot.ino": "/Arduino/MKR_WiFi_1010/boot.ino"
    },
    "Esplora": {
      "boot.ino": "/Arduino/Esplora/boot.ino"
    },
    "Yun": {
      "boot.ino": "/Arduino/Yun/boot.ino"
    }
  },
  "ESP": {
    "ESP32": {
      "WROOM": {
        "boot.ino": "/ESP/ESP32/WROOM/boot.ino"
      }
    },
    "ESP8266": {
      "NodeMCU": {
        "boot.ino": "/ESP/ESP8266/NodeMCU/boot.ino"
      }
    }
  }
};

const fileBrowser = document.getElementById('file-browser');
const fileContent = document.getElementById('file-content');
const copyBtn = document.getElementById('copy-btn');

function renderTree(structure, container) {
  Object.keys(structure).forEach(key => {
    const value = structure[key];

    const item = document.createElement('div');
    item.style.cursor = "pointer";
    item.style.margin = "5px 0";

    if (typeof value === "string") {
      item.textContent = key;
      item.style.padding = "3px 6px";

      item.addEventListener('click', e => {
        e.stopPropagation();
        loadFile(value);
      });

      container.appendChild(item);
      return;
    }

    item.textContent = "üìÅ " + key;
    item.style.fontWeight = "600";

    const children = document.createElement('div');
    children.style.display = "none";
    children.style.marginLeft = "18px";

    item.addEventListener('click', e => {
      e.stopPropagation();
      children.style.display = children.style.display === "none" ? "block" : "none";
    });

    renderTree(value, children);

    item.appendChild(children);
    container.appendChild(item);
  });
}

function loadFile(path) {
  fetch(path)
    .then(res => res.text())
    .then(text => {
      fileContent.textContent = text;
    })
    .catch(() => {
      fileContent.textContent = "// error loading: " + path;
    });
}

copyBtn.addEventListener('click', () => {
  if (fileContent.textContent)
    navigator.clipboard.writeText(fileContent.textContent);
});

renderTree(unfiStructure, fileBrowser);
</script>
</body>
</html>
